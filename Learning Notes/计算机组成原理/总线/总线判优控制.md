---
importance: important
---
# 1 总线判优控制
## 1.1 基本概念
- 主设备（模块）：对总线有控制权
- 从设备（模块）：响应从主设备发来的总线命令

总线判优控制可以分为：
- 集中式：（链式查询、计数器定时查询、独立请求方式）
- 分布式

# 2 链式查询方式
![](https://obsdian-img-1319433252.cos.ap-shanghai.myqcloud.com/2023-11-18-1.jpg)

所有设备通过 BR 对控制部件发送请求，BS 代表总线状态是否被占用。
总线控制部件接收到 BR 总线的请求信号后，并不知道是哪个设备发来的信号，因此通过 BG 这条总线逐个向下进行查询（类似于链表这一数据结构）。优先顺序由连接方式就已经确定。缺点是电路故障问题特别敏感，如果中间有一个设备出现故障，那么它后面的设备也没有使用权。优点是结构简单，增删设备非常容易。一般用于微型计算机或者嵌入式的计算机。

# 3 计数器定时查询方式
![](https://obsdian-img-1319433252.cos.ap-shanghai.myqcloud.com/2023-11-18-2.jpg)

少了总线同意线（BG），多了设备地址线。当总线控制部件接收到 BR 信号时，且在 BS = 0 的情况下，通过设备地址线向各个外设发送地址信号，若设备地址与计数器的值相同，则给予该设备控制权，若不相等，则计数器加一，直到相等为止。
- 优点：采用循环的方式查询，较为灵活（例如：可以设定一个初值，不一定要从第一个设备开始查询），可以通过软件方面的程序设计改变优先顺序
- 缺点：多了设备地址线，控制线还是较为复杂

# 4 独立请求方式
![](https://obsdian-img-1319433252.cos.ap-shanghai.myqcloud.com/2023-11-19-1.jpg)

总线控制部件里有一个排队电路，可以灵活地确定优先次序，缺点是电路最为复杂，大约需要 $2n$ 条线。